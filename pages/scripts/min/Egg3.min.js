function getSModifier(e){var g;return g=0==e?"":1==e?" ":"s "}function padTimeText(e){return 10>e?"0"+e:""+e}function getTimeText(e,g){var t="";return e>0&&(t=e+" "+g+getSModifier(e)),t}function window_RESIZE(){Egg.staticArea.width($(window).width()-20),Egg.staticArea.height($(window).height()-20),Egg.updateText(),Egg.updateProgressBar()}var Egg={name:"EggTimer",defaultText:"",expiredMessage:"",title:"",label:"",progress:0,startTime:0,endTime:0,totalTime:0,parseError:"",progressBar:null,progressText:null,staticArea:null,beep:null,currDate:null,endDate:null,ticker:null,startButton:null,volume:1,sequence:[],canAlert:!0,start:function(){if(""!==Egg.parseError&&"none"!==Egg.parseError)return Egg.progressText.html(Egg.defaultText),void Egg.updateText(Egg.defaultText);if(0===Egg.sequence.length)Egg.initializeTimer(Egg.startTime,Egg.endTime,Egg.label);else{var e=Egg.sequence.shift();Egg.initializeTimer(0,1e3*e.duration,e.label)}},initializeTimer:function(e,g,t){Egg.endTime=g,Egg.startTime=e,Egg.label=t,Egg.totalTime=Egg.endTime-Egg.startTime,Egg.endDate=new Date((new Date).getTime()+Egg.totalTime),Egg.currDate=new Date,Egg.expiredMessage=Egg.expiredMessage||"Time Expired"+(t?": ":"!")+t,Egg.update(),Egg.ticker||(Egg.ticker=setInterval(Egg.update,250))},update:function(){Time.calcTime(Egg.currDate.getTime(),Egg.endDate.getTime()),Egg.updateParts(Time)},updateParts:function(e){if(e.totalSeconds<0)return void Egg.onTimeComplete();var g,t,i,a,r,n,s=[];g=t=i=a=r=n="",e.remainingYears>0&&(s.push(padTimeText(e.remainingYears)+"y"),g=getTimeText(e.remainingYears,"year")),e.remainingMonths>0&&(s.push(padTimeText(e.remainingMonths)+"m"),t=getTimeText(e.remainingMonths,"month")),e.remainingDays>0&&(s.push(padTimeText(e.remainingDays)+"d"),i=getTimeText(e.remainingDays,"day")),e.remainingHours>0&&(s.push(padTimeText(e.remainingHours)+"h"),a=getTimeText(e.remainingHours,"hour")),e.remainingMinutes>0?(s.push(padTimeText(e.remainingMinutes)),r=getTimeText(e.remainingMinutes,"minute")):s.push(padTimeText(0)),e.remainingSeconds>0?(s.push(padTimeText(e.remainingSeconds)),n=getTimeText(e.remainingSeconds,"second")):s.push(padTimeText(0));var E=Egg.label&&""!=Egg.label?Egg.label+"<br />":"",o=E+g+t+i+a+r+n;Egg.updateTitle(s.join(":")+(Egg.label&&""!==Egg.label?" : "+Egg.label:"")),Egg.updateText(o),Egg.progress=(Egg.totalTime-e.totalMilliseconds)/Egg.totalTime,Egg.updateProgressBar(),Egg.currDate=new Date},updateTitle:function(e){document.title=e+" - E.ggtimer"},updateProgressBar:function(){{var e=$(window).width();$(window).height()}Egg.progressBar&&Egg.progressBar.width(e*Egg.progress)},updateText:function(e){e&&Egg.progressText.html(e)},onTimeComplete:function(){if(Egg.progress=1,Egg.updateProgressBar(),Egg.beep&&Egg.beep.play&&(Egg.beep.volume=Egg.volume,Egg.beep.play()),0===Egg.sequence.length)clearInterval(Egg.ticker),Egg.updateTitle(Egg.expiredMessage),Egg.updateText(Egg.expiredMessage),Egg.showAlert();else{var e=Egg.sequence.shift();Egg.initializeTimer(0,1e3*e.duration,e.label)}},showAlert:function(){Egg.canAlert&&alert(Egg.expiredMessage)}};$(function(){Egg.progressBar=$("#progress"),Egg.staticArea=$("#static"),Egg.staticArea.width($(window).width()-20),Egg.staticArea.height($(window).height()-20),Egg.progressText=$("#progressText"),Egg.startButton=$("#progressText"),Egg.updateText(""),Egg.beep=document.getElementById("beepbeep"),$(window).bind("resize",window_RESIZE),window_RESIZE(),navigator.userAgent.match(/iphone/i)||navigator.userAgent.match(/ipad/i)?(Egg.updateText("Tap to Start"),Egg.startButton.click(function(){Egg.beep&&Egg.beep.load&&Egg.beep.load(),Egg.start(),Egg.startButton.unbind("click")}),Egg.startButton.show()):(Egg.beep&&Egg.beep.load&&Egg.beep.load(),Egg.start())});